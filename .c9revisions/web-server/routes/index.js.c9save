{"ts":1388040038091,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n/*\n * GET home page.\n */\n\nexports.index = function(req, res){\n  res.render('index', { title: 'Express' });\n};"]],"start1":0,"start2":0,"length1":0,"length2":110}]],"length":110}
{"contributors":[],"silentsave":false,"ts":1388043742509,"patch":[[{"diffs":[[0,"s){\n"],[-1,"  "],[0,"res."]],"start1":59,"start2":59,"length1":10,"length2":8},{"diffs":[[0,"e: '"],[-1,"Express' "],[1,"Index' });\n};\nexports.login = function(req, res){\nres.render('login', { title: '用户登陆'});\n};\nexports.doLogin = function(req, res){\nvar user={\nusername:'admin',\npassword:'admin'\n}\nif(req.body.username===user.username && req.body.password===user.password){\nres.redirect('/home');\n}\nres.redirect('/login');\n};\nexports.logout = function(req, res){\nres.redirect('/');\n};\nexports.home = function(req, res){\nvar user={\nusername:'admin',\npassword:'admin'\n}\nres.render('home', { title: 'Home',user: user"],[0,"});\n"]],"start1":89,"start2":89,"length1":17,"length2":501}]],"length":592,"saved":false}
{"contributors":[],"silentsave":false,"ts":1388044777660,"patch":[[{"diffs":[[-1,"\n"],[0,"/*\n * GE"]],"start1":0,"start2":0,"length1":9,"length2":8},{"diffs":[[0,"nction(req, res)"],[1," "],[0,"{\n"],[1,"    "],[0,"res.render('inde"]],"start1":44,"start2":44,"length1":34,"length2":39},{"diffs":[[0,"r('index', {"],[1,"\n       "],[0," title: 'Ind"]],"start1":76,"start2":76,"length1":24,"length2":32},{"diffs":[[0," 'Index'"],[1,"\n   "],[0," });\n};\n"]],"start1":103,"start2":103,"length1":16,"length2":20},{"diffs":[[0,"on(req, res)"],[1," "],[0,"{\n"],[1,"    "],[0,"res.render('"]],"start1":145,"start2":145,"length1":26,"length2":31},{"diffs":[[0,"r('login', {"],[1,"\n       "],[0," title: '用户登"]],"start1":173,"start2":173,"length1":24,"length2":32},{"diffs":[[0,": '用户登陆'"],[1,"\n    "],[0,"});\n};\ne"]],"start1":199,"start2":199,"length1":16,"length2":21},{"diffs":[[0,"on(req, res)"],[1," "],[0,"{\n"],[1,"    "],[0,"var user"],[-1,"={\n"],[1," = {\n        "],[0,"username:'ad"]],"start1":243,"start2":243,"length1":37,"length2":52},{"diffs":[[0,"       username:"],[1," "],[0,"'admin',\npasswor"]],"start1":276,"start2":276,"length1":32,"length2":33},{"diffs":[[0,"rname: 'admin',\n"],[1,"        "],[0,"password:'admin'"]],"start1":286,"start2":286,"length1":32,"length2":40},{"diffs":[[0,"ord:"],[1," "],[0,"'admin'\n"],[-1,"}\n"],[1,"    }\n    "],[0,"if"],[1," "],[0,"(req"]],"start1":315,"start2":315,"length1":20,"length2":30},{"diffs":[[0,"username"],[1," "],[0,"==="],[1," "],[0,"user.use"]],"start1":351,"start2":351,"length1":19,"length2":21},{"diffs":[[0,"password"],[1," "],[0,"==="],[1," "],[0,"user.pas"]],"start1":390,"start2":390,"length1":19,"length2":21},{"diffs":[[0,"ord)"],[1," "],[0,"{\n"],[-1,"res.redirect('/home');\n}\n"],[1,"        req.session.user = user;\n        return res.redirect('/home');\n    }\n    else {\n        return "],[0,"res."]],"start1":413,"start2":413,"length1":35,"length2":114},{"diffs":[[0,"('/login');\n"],[1,"    }\n"],[0,"};\nexports.l"]],"start1":535,"start2":535,"length1":24,"length2":30},{"diffs":[[0,"eq, res)"],[1," "],[0,"{\n"],[1,"    "],[0,"res.redi"]],"start1":583,"start2":583,"length1":18,"length2":23},{"diffs":[[0,"res)"],[1," "],[0,"{\n"],[1,"    "],[0,"var user"],[-1,"={\n"],[1," = {\n        "],[0,"user"]],"start1":649,"start2":649,"length1":21,"length2":36},{"diffs":[[0,"sername:"],[1," "],[0,"'admin',"]],"start1":682,"start2":682,"length1":16,"length2":17},{"diffs":[[0,"admin',\n"],[1,"        "],[0,"password"]],"start1":692,"start2":692,"length1":16,"length2":24},{"diffs":[[0,"ord:"],[1," "],[0,"'admin'\n"],[-1,"}\n"],[1,"    }\n    "],[0,"res."]],"start1":713,"start2":713,"length1":18,"length2":27},{"diffs":[[0,"home', {"],[1,"\n       "],[0," title: "]],"start1":748,"start2":748,"length1":16,"length2":24},{"diffs":[[0," 'Home',"],[1,"\n        "],[0,"user: us"]],"start1":771,"start2":771,"length1":16,"length2":25},{"diffs":[[0,"er: user"],[1,"\n    "],[0,"});\n};"]],"start1":790,"start2":790,"length1":14,"length2":19}]],"length":809,"saved":false}
{"ts":1388044813386,"patch":[[{"diffs":[[0,"ion(req, res) {\n"],[1,"    req.session.user = null;\n"],[0,"    res.redirect"]],"start1":578,"start2":578,"length1":32,"length2":61}]],"length":838,"saved":false}
{"ts":1388044856560,"patch":[[{"diffs":[[0,"ct('/');\n};\n"],[1,"\n"],[0,"exports.home"]],"start1":637,"start2":637,"length1":24,"length2":25},{"diffs":[[0,") {\n"],[-1,"    var user = {\n        username: 'admin',\n        password: 'admin'\n    }\n"],[0,"    "]],"start1":682,"start2":682,"length1":84,"length2":8},{"diffs":[[0,"ome'"],[-1,",\n        user: user"],[0,"\n   "]],"start1":728,"start2":728,"length1":28,"length2":8}]],"length":743,"saved":false}
{"ts":1388045706112,"patch":[[{"diffs":[[0," else {\n"],[1,"        req.session.error = '用户名或密码不正确';\n"],[0,"        "]],"start1":500,"start2":500,"length1":16,"length2":57}]],"length":784,"saved":false}
