var oracle = require('oracle');var connectData = {    hostname: "localhost",    port: 1521,    database: "orcl",     user: "test",    password: "test"}exports.index = function(req, res) {    res.render('oracle', {        title: 'Oracle'    });};var dbConn=null;var getOracleDBConn=function(fun){    if(dbConn===null){        oracle.connect(connectData, function(err, connection) {            if (err) {                console.log("Error connecting to db:", err);                return;            }                dbConn=connection;            fun(dbConn);        })    }}exports.query = function(req, res) {    req.setEncoding('utf8');    var sql = req.body['sql'];    //var buf = new Buffer(sql);    //sql=buf.toString('utf8');    console.log(sql);    getOracleDBConn(function(connection) {        connection.execute(sql, [], function(err, results) {            if (err) {                console.log("Error executing query:", err);                res.json({                    success: 0,                    msg: "Error executing query:"+JSON.stringify(err)                 })            }            else {                res.json({                    success: 1,                    data: results                });                //console.log(results);            }            connection.close();            dbConn=null;        });    });};exports.procedure=function(req,res){    }